<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<script src="https://s3.pstatp.com/cdn/expire-1-M/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" href="./index.css" />
	<title>2020年长江三角洲</title>
	<meta name="description" content="d3-voronoi-treemap plugin to remake 'The Costs of Being Fat, in Actual Dollars'">

	<script src="https://d3js.org/d3.v6.min.js" charset="utf-8"></script>
	<script src="./unit/d3-weighted-voronoi.js"></script>
	<script src="./unit/d3-voronoi-map.js"></script>
	<script src="./unit/d3-voronoi-treemap.js"></script>

</head>
<style>

</style>

<body>
	<div class="vor" style="display:none">
		<header>
			<div class="header"><span style="font-size: 22px;">2020年长江三角洲41市GDP足球图</span></div>
		</header>
		<div class="body">
			<div class="body-map">
				<div class="amap" style="width: 700px;position: relative;">
					<svg style="display:block;margin:auto;background:transparent"></svg>
					<div class="title-bg">
						<div class="title-con">
							<div class="border-line">
								<p class="cir" style="margin-left: -5px;">上海大都市圈</p>
								<h5><span>安徽省</span>
									<p style="margin-left: 4px;">苏州市市</p>
								</h5>
							</div>
							<div style="padding: 0 1px;">
								<p style="color:#fff">GDP占比</p>
								<h4><span>8.17</span>%</h4>
							</div>
						</div>
					</div>
				</div>

				<div class="address">
					<div id="triangle"></div>
				</div>
			</div>
			<div class="call">
				<div class="toogle">
					<div class="left"><img src="./img/left.png" /></div>
					<div class="right"><img src="./img/right.png" /></div>
				</div>
				<ul>
					<li class="active li">GDP</li>
					<li class="li">上市公司数量</li>
					<li class="li" style="grid-column: 3/5;background: url('./img/.png') no-repeat; background-size: 100% 100%;">社会消费品零售总额</li>
					<li class="li">实际利用外资</li>
					<li class="li">进出口总额</li>
					<li class="li">GDP增加值</li>
					<li class="li">上市公司增长数</li>
					<li class="li" style="grid-column: 3/5;">社会消费品零售总额增加值</li>
					<li class="li">固定资产投资额</li>
					<li class="li">一般公共预算收入</li>
				</ul>
			</div>
		</div>
		<canvas id="animate" style="position: absolute; top: 0; z-index: -1;"></canvas>
	</div>
	<!-- <script src="./unit/animate.js"></script> -->
	<script src="./unit/bg-anim.js"></script>
	<script src="https://cdn.staticfile.org/echarts/4.5.0/echarts.min.js"></script>
	<script src="./js/data.js"> </script>
	<script src="./js/dataJson.js"> </script>
	<script src="./js/dataJson2.js"> </script>
	<script src="./js/address.js"> </script>
	<script src="./unit/json2.js"></script>
	<script src="./unit/cycle.js"></script>
	<script type="text/javascript" src="./index.js"></script>
	<script>
		$(function () {
			document.onreadystatechange = subSomething; //当页面加载状态改变的时候执行这个方法. 
			subSomething()

			function subSomething() {
				console.log(document.readyState)
				if (document.readyState == 'complete') //当页面加载状态 
				{
					$('.vor').show()
				} else {
					$('.vor').hide()
				}
			}
			let num = 1
			// jwxTest()
			mapChart.amap(data1, JSON.retrocycle(dataLine))
			// mapChart.amap(data6, JSON.retrocycle(dataLine6))

			$('.left').click(function () {
				$('.treemap-container').empty()
				$('.legended').empty()
				if (num > 0) {
					num = num - 1
					if (num == 1) {
						mapChart.amap(data1, dataLine)
						$('header span').text('2020年长江三角洲41市GDP足球图')
					}
					if (num == 2) {
						if (dataLine3[5].data) {
							mapChart.amap(data3, dataLine3)
						} else {
							mapChart.amap(data3, JSON.retrocycle(dataLine3))
						}
						$('header span').text('2020年长江三角洲各市上市公司数量占比')
					}
					if (num == 3) {
						if (dataLine5[5].data) {
							mapChart.amap(data5, dataLine5)
						} else {
							mapChart.amap(data5, JSON.retrocycle(dataLine5))
						}
						// mapChart.amap(data5, JSON.retrocycle(dataLine5))
						$('header span').text('2020年长江三角洲各市社会消费品零售总额占比')
					}
					if (num == 4) {
						if (dataLine7[5].data) {
							mapChart.amap(data7, dataLine7)
						} else {
							mapChart.amap(data7, JSON.retrocycle(dataLine7))
						}
						$('header span').text('2020年长江三角洲各市实际利用外资占比')
					}
					if (num == 5) {
						if (dataLine8[5].data) {
							mapChart.amap(data8, dataLine8)
						} else {
							mapChart.amap(data8, JSON.retrocycle(dataLine8))
						}
						$('header span').text('2020年长江三角洲各市进出口总额占比')
					}
					if (num == 6) {
						if (dataLine2[5].data) {
							mapChart.amap(data2, dataLine2)
						} else {
							mapChart.amap(data2, JSON.retrocycle(dataLine2))
						}
						$('header span').text('2020年长江三角洲GDP增加值足球图')
					}
					if (num == 7) {
						if (dataLine4[5].data) {
							mapChart.amap(data4, dataLine4)
						} else {
							mapChart.amap(data4, JSON.retrocycle(dataLine4))
						}
						$('header span').text('2020年长江三角洲各市上市公司增长数占比')
					}
					if (num == 8) {
						if (dataLine6[5].data) {
							mapChart.amap(data6, dataLine6)
						} else {
							mapChart.amap(data6, JSON.retrocycle(dataLine6))
						}
						$('header span').text('2020年长江三角洲各市社会消费品零售总额增加值占比')
					}
					if (num == 9) {
						if (dataLine9[5].data) {
							mapChart.amap(data9, dataLine9)
						} else {
							mapChart.amap(data9, JSON.retrocycle(dataLine9))
						}
						$('header span').text('2020年长江三角洲各市固定资产投资额占比')
					}
					if (num == 10) {
						if (dataLine10[5].data) {
							mapChart.amap(data10, dataLine10)
						} else {
							mapChart.amap(data10, JSON.retrocycle(dataLine10))
						}
						$('header span').text('2020年长江三角洲各市一般公共预算收入占比')
					}
					$('ul li').removeClass("active")
					$(`.li:eq(${num-1})`).addClass('active');
				}
			})

			$('.right').click(function () {
				$('.treemap-container').empty()
				$('.legended').empty()
				if (num < 9) {
					num = num + 1
					if (num == 1) {
						mapChart.amap(data1, dataLine)
						$('header span').text('2020年长江三角洲41市GDP足球图')
					}
					if (num == 2) {
						if (dataLine3[5].data) {
							mapChart.amap(data3, dataLine3)
						} else {
							mapChart.amap(data3, JSON.retrocycle(dataLine3))
						}
						$('header span').text('2020年长江三角洲各市上市公司数量占比')
					}
					if (num == 3) {
						if (dataLine5[5].data) {
							mapChart.amap(data5, dataLine5)
						} else {
							mapChart.amap(data5, JSON.retrocycle(dataLine5))
						}
						// mapChart.amap(data5, JSON.retrocycle(dataLine5))
						$('header span').text('2020年长江三角洲各市社会消费品零售总额占比')
					}
					if (num == 4) {
						if (dataLine7[5].data) {
							mapChart.amap(data7, dataLine7)
						} else {
							mapChart.amap(data7, JSON.retrocycle(dataLine7))
						}
						$('header span').text('2020年长江三角洲各市实际利用外资占比')
					}
					if (num == 5) {
						if (dataLine8[5].data) {
							mapChart.amap(data8, dataLine8)
						} else {
							mapChart.amap(data8, JSON.retrocycle(dataLine8))
						}
						$('header span').text('2020年长江三角洲各市进出口总额占比')
					}
					if (num == 6) {
						if (dataLine2[5].data) {
							mapChart.amap(data2, dataLine2)
						} else {
							mapChart.amap(data2, JSON.retrocycle(dataLine2))
						}
						$('header span').text('2020年长江三角洲GDP增加值足球图')
					}
					if (num == 7) {
						if (dataLine4[5].data) {
							mapChart.amap(data4, dataLine4)
						} else {
							mapChart.amap(data4, JSON.retrocycle(dataLine4))
						}
						$('header span').text('2020年长江三角洲各市上市公司增长数占比')
					}
					if (num == 8) {
						if (dataLine6[5].data) {
							mapChart.amap(data6, dataLine6)
						} else {
							mapChart.amap(data6, JSON.retrocycle(dataLine6))
						}
						$('header span').text('2020年长江三角洲各市社会消费品零售总额增加值占比')
					}
					if (num == 9) {
						if (dataLine9[5].data) {
							mapChart.amap(data9, dataLine9)
						} else {
							mapChart.amap(data9, JSON.retrocycle(dataLine9))
						}
						$('header span').text('2020年长江三角洲各市固定资产投资额占比')
					}
					if (num == 10) {
						if (dataLine10[5].data) {
							mapChart.amap(data10, dataLine10)
						} else {
							mapChart.amap(data10, JSON.retrocycle(dataLine10))
						}
						$('header span').text('2020年长江三角洲各市一般公共预算收入占比')
					}
					$('ul li').removeClass("active")
					$(`.li:eq(${num-1})`).addClass('active');
				}
			})


			$('ul li').click(function () {
				$("ul li").removeClass("active");
				$(this).addClass("active");
				$('.treemap-container').empty()
				$('.legended').empty()
				if ($(this).text() == "GDP") {
					num = 1
					mapChart.amap(data1, dataLine)
					$('header span').text('2020年长江三角洲41市GDP足球图')
				}
				if ($(this).text() == "上市公司数量") {
					num = 2
					if (dataLine3[5].data) {
						mapChart.amap(data3, dataLine3)
					} else {
						mapChart.amap(data3, JSON.retrocycle(dataLine3))
					}
					$('header span').text('2020年长江三角洲各市上市公司数量占比')
				}
				if ($(this).text() == "社会消费品零售总额") {
					num = 3
					if (dataLine5[5].data) {
						mapChart.amap(data5, dataLine5)
					} else {
						mapChart.amap(data5, JSON.retrocycle(dataLine5))
					}
					// mapChart.amap(data5, JSON.retrocycle(dataLine5))
					$('header span').text('2020年长江三角洲各市社会消费品零售总额占比')
				}
				if ($(this).text() == "实际利用外资") {
					num = 4
					if (dataLine7[5].data) {
						mapChart.amap(data7, dataLine7)
					} else {
						mapChart.amap(data7, JSON.retrocycle(dataLine7))
					}
					$('header span').text('2020年长江三角洲各市实际利用外资占比')
				}
				if ($(this).text() == "进出口总额") {
					num = 5
					if (dataLine8[5].data) {
						mapChart.amap(data8, dataLine8)
					} else {
						mapChart.amap(data8, JSON.retrocycle(dataLine8))
					}
					$('header span').text('2020年长江三角洲各市进出口总额占比')
				}
				if ($(this).text() == "GDP增加值") {
					num = 6
					if (dataLine2[5].data) {
						mapChart.amap(data2, dataLine2)
					} else {
						mapChart.amap(data2, JSON.retrocycle(dataLine2))
					}
					$('header span').text('2020年长江三角洲GDP增加值足球图')
				}
				if ($(this).text() == "上市公司增长数") {
					num = 7
					// mapChart.amap(data4, JSON.retrocycle(dataLine4))
					if (dataLine4[5].data) {
						mapChart.amap(data4, dataLine4)
					} else {
						mapChart.amap(data4, JSON.retrocycle(dataLine4))
					}
					$('header span').text('2020年长江三角洲各市上市公司增长数占比')
				}
				if ($(this).text() == "社会消费品零售总额增加值") {
					num = 8
					// mapChart.amap(data6, JSON.retrocycle(dataLine6))
					if (dataLine6[5].data) {
						mapChart.amap(data6, dataLine6)
					} else {
						mapChart.amap(data6, JSON.retrocycle(dataLine6))
					}
					$('header span').text('2020年长江三角洲各市社会消费品零售总额增加值占比')
				}
				if ($(this).text() == "固定资产投资额") {
					num = 9
					// mapChart.amap(data9, JSON.retrocycle(dataLine9))
					if (dataLine9[5].data) {
						mapChart.amap(data9, dataLine9)
					} else {
						mapChart.amap(data9, JSON.retrocycle(dataLine9))
					}
					$('header span').text('2020年长江三角洲各市固定资产投资额占比')
				}
				if ($(this).text() == "一般公共预算收入") {
					num = 10
					// mapChart.amap(data10, JSON.retrocycle(dataLine10))
					if (dataLine10[5].data) {
						mapChart.amap(data10, dataLine10)
					} else {
						mapChart.amap(data10, JSON.retrocycle(dataLine10))
					}
					$('header span').text('2020年长江三角洲各市一般公共预算收入占比')
				}
			})
		})
	</script>
</body>

</html>